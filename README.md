# HeartBeat解决方案 #

1. **HeartBeat介绍**


与网络上所说的HeartBeat不同，此HeartBeat是Java开发的利用公共数据源实时更新心跳状态的嵌入式工具。

在工程中，有静态常量来记录当前应用的存活状态，从而可以实现应用层级的负载均衡。

2. **HeartBeat使用**

HeartBeat是一款嵌入式应用，除了jar包，还需要几个配置和表模型来支撑HeartBeat，需要配置测心跳的频率、应用名称、当前应用的域名等等。

数据库中表字段只会存储存活应用的各项数据，包括最后更新时间。

3. **HeartBeat机制**

工程运行，执行测试心跳Timer，每隔一段时间，都会去执行一系列操作：

- 判断数据库中有没有本应用的数据，如果没有，则根据配置insert一条
- 判断自己是不是主机master
	- 如果是则继续执行
	- 如果不是则去取库中的最后更新时间和心跳间隔，来与当前时间对比，从而得知另外的主机是否仍然活着
		
		- 如果仍然活着，则认定自己为备机
		
		- 否则，将更新自己应用中的静态常量，告知自己的应用“我活了”，并且更新数据库的记录
